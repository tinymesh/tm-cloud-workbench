<div id="res-selector" class="container">
	<div class="row">

		<div class="col-xs-12" ng-init="activetab = 'summary'">
			<ul class="nav nav-tabs">
				<li ng-class='{active:activetab == "summary"}'><a ng-click="activetab = 'summary'">Welcome</a></li>
			</ul>


			<div class="col-xs-4">
				<div class="page-header">
					<h4>Organizations</h4>
				</div>

				<div>
					<ul class="inline list nav nav-stacked nav-pills">
						<li ng-class="{active: entity == 'user/' + user.email}">
							<a ng-href="#/dashboard/user:{{user.email}}">Private Networks</a>
						</li>
						<li ng-class="{active: entity === 'organization/' + org.key}"
						    ng-repeat="org in organizations">
								<a ng-href="#/dashboard/organization:{{org.key}}">{{org.name || org.key}}</a>
						</li>
						<li ng-show="userloading">
								<span us-spinner="{top: '20px', lines: 7, length: 0, width: 2, radius: 10, trail: 79}"></span>
								&nbsp;<br/>&nbsp;
						</li>
					</ul>
				</div>
			</div>

			<div class="col-xs-8" ng-show="netloading">
				<span us-spinner="{lines: 7, length: 0, width: 2, radius: 10, trail: 79}"></span>
			</div>

			<div class="col-xs-8" ng-show="orgnets[entity]">
				<table class="table table-striped table-border">
					<tr ng-repeat="net in orgnets[entity]">
						<td><a href="#/network/{{net.key}}">{{net.name || "Unnamed net"}} ({{net.key}})</a></td>
						<td ng-init="stats = netstats(net)">
							<span
								class="label label-warning"
								ng-show="0 < stats.channels.active.length && stats.channels.inactive.length > 0">
								{{stats.channels.inactive.length}} inactive gateways ({{stats.gateways.length}} total)
							</span>
							<span
								class="label label-danger"
								ng-show="0 === stats.channels.active.length && stats.channels.inactive.length > 0">
								All {{stats.gateways.length}} gateways inactive
							</span>
							<span
								class="label label-info"
								ng-show="0 === (stats.gateways || []).length">
								No gateways provisioned
							</span>
							<span
								class="label label-success"
								ng-show="0 < stats.gateways.length && 0 === stats.channels.inactive.length">
								All gateways communicating
							</span>
						</td>
						<td>No notifications</td>
					</tr>
				</table>
			</div>
			<div class="col-xs-8" ng-hide="netloading || orgnets[entity]">
				<div class="alert alert-warning">
					<p>
						<b>Error:</b> No such entity <i>{{entity}}</i>
					</p>

					<p>
						Try selecting a entity from the menu on the left side.
					</p>
				</div>
			</div>
		</div>

	</div>
</div>
